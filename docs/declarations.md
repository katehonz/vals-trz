# Декларации за НАП и НОИ

## Общ преглед

Системата поддържа генериране на всички необходими декларации и уведомления за:

- **НАП** (Национална агенция за приходите)
- **НОИ** (Национален осигурителен институт)

## Декларация 1

### Описание
Месечни данни за осигурените лица по чл. 7, ал. 1 от КСО.

### Съдържание
- ЕГН на осигуреното лице
- Вид осигуряване
- Осигурителен доход
- Дни на осигуряване
| Код на икономическа дейност
- Вноски по фондове

### Генериране
```
GET /api/companies/{companyId}/declarations/1/{year}/{month}
```

### Формат на файла
CSV файл по спецификация на НАП.

### Срок за подаване
До 25-то число на месеца, следващ месеца на плащането.

## Декларация 6

### Описание
Общи суми на осигурителните вноски.

### Съдържание
- Общ осигурителен доход
- Вноски за ДОО (Пенсии, ОЗМ, Безработица)
- Вноски за ДЗПО-УПФ
| Здравни вноски
- Вноски за ТЗПБ

### Генериране
```
GET /api/companies/{companyId}/declarations/6/{year}/{month}
```

### Срок за подаване
До 25-то число на месеца, следващ месеца на плащането.

## Уведомление по чл. 62

### Описание
Уведомление до ТД на НАП при:
- Сключване на трудов договор
- Изменение на трудов договор
- Прекратяване на трудов договор

### Видове
| Код | Описание |
|-----|----------|
| 1 | Първоначална регистрация |
| 2 | Сключване на ТД |
| 3 | Изменение на ТД |
| 4 | Прекратяване на ТД |

### Данни
- ЕГН на лицето
| Вид на уведомлението
- Дата на събитието
- Данни за работодателя
- Данни за ТД (при сключване/изменение)

### Генериране
```
GET /api/companies/{companyId}/declarations/article62/{employeeId}?type={type}
```

### Срок за подаване
- При сключване: До 3 дни от сключването
- При изменение: До 3 дни от изменението
- При прекратяване: До 3 дни от прекратяването

## Уведомление по чл. 123

### Описание
При промяна на работодателя (сливане, вливане, отделяне).

### Данни
- Данни за новия работодател
| Дата на прехвърлянето
- Списък на прехвърлените лица

## Данни за НОИ

### Приложение 9 / Приложение 10
Болнични листове за временна нетрудоспособност.

### Съдържание
- ЕГН на лицето
| Вид на нетрудоспособността
- Период на нетрудоспособност
- Дни за сметка на работодателя
- Дни за сметка на НОИ
- Сума на обезщетението

### Генериране
```
GET /api/companies/{companyId}/declarations/nssi/{year}/{month}
```

### Срок за подаване
В рамките на 30 дни от края на месеца на възникване на правото.

## Експорт на декларации

### Файлови формати

| Декларация | Формат |
|------------|--------|
| Декларация 1 | CSV |
| Декларация 6 | CSV |
| Чл. 62 | XML |
| Чл. 123 | XML |
| НОИ | CSV |

### Експорт API

```
GET /api/companies/{companyId}/declarations/{type}/{year}/{month}/export
```

Параметри:
- `type`: 1, 6, article62, article123, nssi
- `year`: Година
- `month`: Месец

Отговор: Файл за изтегляне.

## Подаване на декларации

### Електронно подаване

Декларациите се подават чрез:
- **НАП**: e-Tax портал (https://etax.nap.bg)
- **НОИ**: електронни услуги на НОИ

### Стъпки

1. Генерирайте декларацията в системата
2. Изтеглете файла
3. Влезте в съответния портал
4. Качете файла
5. Подпишете с КЕП (квалифициран електронен подпис)
6. Получете потвърждение

### Запазване на потвърждение

След успешно подаване:
1. Запазете референтния номер
2. Въведете го в системата (ако е приложимо)
3. Съхранете потвърждението

## История на подадените декларации

Системата пази история на всички подадени декларации:

```
GET /api/companies/{companyId}/declarations/submissions
```

Данни:
- Тип на декларацията
- Период
- Дата на подаване
- Референтен номер
- Статус

## Проверка и валидация

Преди генериране на декларацията, системата проверява:

1. **Пълнота на данните**
   - Всички служители имат въведени ЕГН
   - Всички служители имат осигурителен доход
   - Всички служители имат дни на осигуряване

2. **Коректност на данните**
   - Осигурителен доход >= МРЗ
   - Осигурителен доход <= Максимален осигурителен доход
   - Дни на осигуряване <= Работни дни

3. **Съответствие**
   - Сумите от Декларация 1 = Сумите от Декларация 6
   - Дните съответстват на часовите карти

## Често задавани въпроси

### Какво да правя при грешка в подадена декларация?

1. Генерирайте коригираща декларация
2. Подайте я чрез портала
3. Посочете номера на оригиналната декларация

### Как да подам декларация за нов служител?

Декларация 1 се подава за всички служители, получили възнаграждение през месеца. Новият служител ще бъде включен автоматично.

### Кога се подава чл. 62?

- При сключване на ТД: в рамките на 3 работни дни
- Не се подава ежемесечно

### Какво се случва при болничен?

Болничните дни се отразяват в Декларация 1 с код на вида на осигуряването. Данните за НОИ се подават отделно чрез Приложение 9/10.
